{% extends 'apps/base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'apps/css/products.css' %}">
{% endblock %}
{% block content %}
    <main class="main">
        <table class="product-table">
            <thead>
            <tr>
                <th>‚Ññ</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ö—É–ø–ª–µ–Ω–Ω–∞—è —Ü–µ–Ω–∞</th>
                <th>–ü—Ä–æ–¥–∞–≤–∞–µ–º–∞—è —Ü–µ–Ω–∞</th>
                <th>–®—Ç—É–∫</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody>
            {% for product in products %}
                <tr>
                    <td>{{ product.id }}</td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.bought_price }} ‚Ç∏</td>
                    <td>{{ product.sold_price }} ‚Ç∏</td>
                    <td>{{ product.quantity }}</td>
                    <td>
                        <button class="icon-btn update" title="–ò–∑–º–µ–Ω–∏—Ç—å">
                            <a href="{% url 'product_update' product.id %}"
                               style="color: white; text-decoration: none;">‚úèÔ∏è</a>
                        </button>
                        <button class="icon-btn delete" title="–£–¥–∞–ª–∏—Ç—å"
                                onclick="openDeleteModal(this)"
                                data-product-id="{{ product.id }}"
                                data-product-name="{{ product.full_name }}">
                            üóë
                        </button>
                    </td>
                </tr>
            {% endfor %}

            </tbody>
        </table>

        <button class="add-btn">‚ûï</button>
    </main>
    <!-- Modal oynasi -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</h2>
            <form method="POST" action="{% url 'product_list' %}">
                {% csrf_token %}
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" name="name" required>

                <label>–ö—É–ø–ª–µ–Ω–Ω–∞—è —Ü–µ–Ω–∞:</label>
                <input type="number" min="0" name="bought_price" required>

                <label>–ü—Ä–æ–¥–∞–≤–∞–µ–º–∞—è —Ü–µ–Ω–∞:</label>
                <input type="number" min="0" name="sold_price" required>

                <label>–®—Ç—É–∫:</label>
                <input type="number" min="1" name="quantity" required>

                <button type="submit" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeDeleteModal()">&times;</span>
            <h2>–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h2>
            <p id="deleteText">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?</p>
            <form id="deleteForm" method="POST">
                {% csrf_token %}
                <button type="submit" class="delete-btn">–î–∞, —É–¥–∞–ª–∏—Ç—å</button>
                <button type="button" class="cancel-btn" onclick="closeDeleteModal()">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    {% block extra_js %}
        <script src="{% static 'apps/js/products.js' %}"></script>
    {% endblock %}

{% endblock %}