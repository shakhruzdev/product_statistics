{% extends 'apps/base.html' %}
{% load static %}

{% block content %}
    <main class="main">
        <div class="form-row">
            <button class="add-btn" onclick="openModal()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
        </div>
        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2>–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</h2>
                <form id="clientForm" method="post" action="{% url 'client_list' %}">
                    {% csrf_token %}
                    –ò–º—è: <input type="text" name="full_name" required><br>
                    –¢–µ–ª–µ—Ñ–æ–Ω: <input type="tel" name="phone_number" required><br><br>
                    <button type="submit" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="cancel-btn">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                </form>
            </div>
        </div>

        <table class="client-table">
            <thead>
            <tr>
                <th>‚Ññ</th>
                <th>–ò–º—è</th>
                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody>
            {% for client in clients %}
                <tr>
                    <td>{{ client.id }}</td>
                    <td>{{ client.full_name }}</td>
                    <td>{{ client.phone_number }}</td>
                    <td>
                        <button class="icon-btn edit" title="–ò–∑–º–µ–Ω–∏—Ç—å">‚úèÔ∏è</button>
                        <button class="icon-btn delete" title="–£–¥–∞–ª–∏—Ç—å">üóë</button>
                    </td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
    </main>
    <script>
        function openModal() {
            document.getElementById("modal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("modal").style.display = "none";
        }

        document.getElementById("clientForm").addEventListener("submit", function (e) {
            e.preventDefault();
            const name = e.target.name.value;
            const phone = e.target.phone.value;
            console.log("Yangi klient:", name, phone);
            closeModal();
        });
    </script>

{% endblock %}